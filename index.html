<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>LSOA 028A ‚Äì Smethwick Insight Map</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ol@latest/ol.css">

<style>
html, body {
    margin: 0;
    padding: 0;
    font-family: Arial, sans-serif;
}

#map {
    width: 100%;
    height: 100vh;
}

/* Title bar */
.map-title {
    position: absolute;
    top: 10px;
    left: 10px;
    background: white;
    padding: 10px 12px;
    border-radius: 6px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.25);
    z-index: 1000;
}

.map-title strong {
    display: block;
    margin-bottom: 6px;
}

/* Icon buttons */
.map-title span {
    width: 34px;
    height: 34px;
    font-size: 18px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    background: #ffffff;
    border: 1px solid #ccc;
    cursor: pointer;
    margin-right: 4px;
    transition: background 0.2s ease, transform 0.15s ease;
}

.map-title span:hover {
    background: #e9ecef;
    transform: translateY(-1px);
}

/* Icon colours */
#info-button { color: #007bff; }
#benefits-button { color: #28a745; }
#attendance-button { color: #ffc107; }
#homechecks-button { color: #6f42c1; }
#digital-button { color: #17a2b8; }
#summary-button { color: #343a40; }

/* Popup styling */
.popup-info {
    position: absolute;
    top: 46px;
    left: 0;
    background: white;
    border: 1px solid #ccc;
    padding: 12px;
    width: 340px;
    max-height: 420px;
    overflow-y: auto;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    border-radius: 6px;
    display: none;
    opacity: 0;
    transform: translateY(-8px);
    transition: opacity 0.25s ease, transform 0.25s ease;
}

.popup-info.show {
    display: block;
    opacity: 1;
    transform: translateY(0);
}

.popup-info h3 {
    margin-top: 0;
}

.popup-info button {
    margin-top: 10px;
}

/* Print mode */
@media print {
    #map,
    .map-title span:not(#summary-button),
    .ol-control {
        display: none !important;
    }

    .popup-info {
        position: static;
        display: block !important;
        width: 100%;
        max-height: none;
        border: none;
        box-shadow: none;
        opacity: 1 !important;
        transform: none !important;
    }

    button {
        display: none;
    }
}
</style>
</head>

<body>

<div id="map"></div>

<div class="map-title">
<strong>LSOA 028A ‚Äì Smethwick</strong>

<span id="info-button" title="IMD 2025">‚ÑπÔ∏è</span>
<span id="benefits-button" title="Benefits">üí∑</span>
<span id="attendance-button" title="School Attendance">üéì</span>
<span id="homechecks-button" title="Home Checks">üè†</span>
<span id="digital-button" title="Digital Propensity">üíª</span>
<span id="summary-button" title="Executive Summary">üìÑ</span>

<!-- IMD -->
<div id="info-popup" class="popup-info">
<h3>IMD 2025 Overview</h3>
<p>LSOA 028A is among the most deprived areas nationally, ranking in the highest deprivation deciles across income, employment, health, and living environment domains.</p>
<button>Close</button>
</div>

<!-- Benefits -->
<div id="benefits-popup" class="popup-info">
<h3>Benefits</h3>
<p>Over 40% of residents are in receipt of at least one DWP benefit, indicating high levels of income vulnerability and economic inactivity.</p>
<button>Close</button>
</div>

<!-- Attendance -->
<div id="attendance-popup" class="popup-info">
<h3>School Attendance</h3>
<p><strong>2024:</strong> Average attendance ~92%, unauthorized absences typically 2‚Äì5%.</p>
<p><strong>2025:</strong> Attendance slightly lower (~90‚Äì91%), with higher variability and some cases of chronic absence.</p>
<p>Most absences are authorized, suggesting illness rather than truancy.</p>
<button>Close</button>
</div>

<!-- Home Checks -->
<div id="homechecks-popup" class="popup-info">
<h3>Home Visits</h3>
<ul>
<li>~75‚Äì80% of households visited within last 12 months</li>
<li>Visit gaps range from 22 days to ~4 years</li>
<li>Small number of long-overdue households</li>
<li>Some duplicate or anomalous records present</li>
</ul>
<button>Close</button>
</div>

<!-- Digital -->
<div id="digital-popup" class="popup-info">
<h3>Digital Propensity</h3>
<p>DPI Score: <strong>0.913</strong> (below Sandwell average of ~0.933).</p>
<p>This suggests reduced confidence or access to online services.</p>
<p>Offline or supported digital options remain important.</p>
<button>Close</button>
</div>

<!-- Summary -->
<div id="summary-popup" class="popup-info">
<h3>Executive Summary</h3>
<ul>
<li>High deprivation (IMD 2025)</li>
<li>High benefit dependency</li>
<li>Attendance generally strong but uneven</li>
<li>Some overdue home visits</li>
<li>Below-average digital engagement</li>
</ul>
<p><strong>Implication:</strong> Targeted, in-person and joined-up services required.</p>
<button onclick="window.print()">Print</button>
</div>

</div>

<script src="https://cdn.jsdelivr.net/npm/ol@latest/ol.js"></script>

<script>
const map = new ol.Map({
    target: 'map',
    layers: [
        new ol.layer.Tile({
            source: new ol.source.OSM()
        })
    ],
    view: new ol.View({
        center: ol.proj.fromLonLat([-1.97, 52.49]),
        zoom: 14
    })
});

function setupPopup(buttonId, popupId) {
    const button = document.getElementById(buttonId);
    const popup = document.getElementById(popupId);
    const closeBtn = popup.querySelector("button");

    button.addEventListener("click", e => {
        e.stopPropagation();
        document.querySelectorAll(".popup-info").forEach(p => {
            p.classList.remove("show");
            p.style.display = "none";
        });
        popup.style.display = "block";
        requestAnimationFrame(() => popup.classList.add("show"));
    });

    closeBtn.addEventListener("click", () => {
        popup.classList.remove("show");
        setTimeout(() => popup.style.display = "none", 200);
    });
}

setupPopup("info-button","info-popup");
setupPopup("benefits-button","benefits-popup");
setupPopup("attendance-button","attendance-popup");
setupPopup("homechecks-button","homechecks-popup");
setupPopup("digital-button","digital-popup");
setupPopup("summary-button","summary-popup");

document.addEventListener("click", () => {
    document.querySelectorAll(".popup-info").forEach(p => {
        p.classList.remove("show");
        p.style.display = "none";
    });
});
</script>

</body>
</html>


































